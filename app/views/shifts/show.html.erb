<div id = flash>
  <% if flash[:error] %>
      <p><%= flash[:error] %></p></br>
  <% end %>
  <% if flash[:notice] %>
      <p><%= flash[:notice] %></p></br>
  <% end %>
</div>

<% if @shift.role %>
  Role: <%= @shift.role %>
<% end %>

<h2><%= @shift.skills.pluck(:description) %></h2>

Description: <%= @shift.description %> <br>
Start Time: <%= @shift.formatted_start_time %> <br>
End Time: <%= @shift.formatted_end_time %> <br>
Limit: <%= @shift.limit %> <br>

<% if @shift.has_limit %>
    <%= @shift.volunteer_commitments.length %>/<%= @shift.limit %> slots filled
<% end %>


<% if not current_user.nil? %>
    <% if current_user.signed_up_for @shift %>
      <%= link_to 'Leave', "/user/leave_shift/#{@shift.id}" %> <br>
    <% elsif not @shift.has_limit or @shift.volunteer_commitments.length < @shift.limit %>
      <%= link_to 'Join', "/user/join_shift/#{@shift.id}" %> <br>
    <% end %>
<% end %>
</br>
<% if can? :update, @shift %>
    <%= link_to 'View Volunteers', shift_viewUsers_path(@event, @shift) %> <br>
    <%= link_to 'Edit Shift', edit_event_shift_path(@event, @shift) %> <br>
<%end%>
<% if can? :create, @shift %>
    <%= link_to 'Add Shift', new_event_shift_path(@event) %> <br>
<% end %>
<% if can? :destroy, @shift %>
    <%= button_to 'Delete Shift', event_shift_path(@event, @shift), :method => :delete %> <br>
<% end %>

<%= link_to 'Back to Event', event_path(@event) %>
